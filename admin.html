<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">

    <title>Dawon Athletics</title>


    <!-- Additional CSS Files -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.css">

    <link rel="stylesheet" href="assets/css/style.css">

    <link rel="stylesheet" href="assets/css/owl-carousel.css">

    <link rel="stylesheet" href="assets/css/lightbox.css">
    <style>
        .accordion-container {
          width: 100%;
          max-width: 600px;
          margin: 0 auto;
          font-family: Arial, sans-serif;
        }
      
        .accordion {
          border: 1px solid #ddd;
          margin-bottom: 10px;
          border-radius: 5px;
          overflow: hidden;
        }
      
        .accordion-header {
          background-color: #f7f7f7;
          padding: 5px;
          cursor: pointer;
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-weight: bold;
        }
      
        .accordion-header:hover {
          background-color: #e0e0e0;
        }
      
        .toggle-icon {
          font-size: 58px;
          transition: transform 0.3s ease;
        }
      
        .accordion-content {
          display: none;
          padding: 15px;
          background-color: #fff;
          border-top: 1px solid #ddd;
        }
      
        .accordion-content img {
          display: block;
          max-width: 100%;
          height: auto;
        }
      
        .accordion.open .accordion-content {
          display: block;
        }
      
        .accordion.open .toggle-icon {
          transform: rotate(45deg);
        }
      
        @media (max-width: 768px) {
          .accordion-container {
            padding: 0 15px;
          }
        }
            .logining{
                font-family: Arial, sans-serif;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                margin: 0;
                background: #f7f7f7;
            }
            .login-container {
                width: 300px;
                padding: 20px;
                background: white;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }
    
            .login-container h2 {
                text-align: center;
                margin-bottom: 20px;
            }
    
            .form-group {
                margin-bottom: 15px;
            }
    
            .form-group label {
                display: block;
                margin-bottom: 5px;
                font-weight: bold;
            }
    
            .form-group input {
                width: 100%;
                padding: 10px;
                border: 1px solid #ccc;
                border-radius: 4px;
                font-size: 14px;
            }
    
            .login-button {
                width: 100%;
                padding: 10px;
                background: #007bff;
                color: white;
                border: none;
                border-radius: 4px;
                font-size: 16px;
                cursor: pointer;
            }
    
            .login-button:hover {
                background: #0056b3;
            }
    
            .error-message {
                color: red;
                font-size: 14px;
                margin-top: 10px;
            }
			/* General table styling */
  .responsive-table {
    width: 100%;
    border-collapse: collapse;
    margin: 0 auto;
    text-align: center;
  }

  .responsive-table th,
  .responsive-table td {
    padding: 10px;
    border: 1px solid #ddd;
  }

  .responsive-table thead {
    background-color: #f4f4f4;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .responsive-table thead {
      display: none; /* Hide table headers for smaller screens */
    }

    .responsive-table tbody,
    .responsive-table tr,
    .responsive-table td {
      display: block;
      width: 100%;
    }

    .responsive-table tr {
      margin-bottom: 15px;
    }

    .responsive-table td {
      text-align: left;
      padding-left: 10%;
      position: relative;
    }

    .responsive-table td::before {
      content: attr(data-label); /* Add header text before each cell */
      position: absolute;
      left: 10px;
      width: calc(50% - 20px);
      font-weight: bold;
    }
  }
      </style>
      <script>
        const login=localStorage.getItem('isLogin')
        if(!login){
            window.location.href = "/htmll.html";
        }
        
    </script>
    <script>
        const logout = () =>{
            localStorage.removeItem('isLogin')
            window.location.href = "/dawn/index.html";
        }
    </script>

    </head>
    
    <body>
    
    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>  
    <!-- ***** Preloader End ***** -->
    
    
    <!-- ***** Header Area Start ***** -->
    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <a href="index.html" class="logo">
                            <img src="image/logo.png">
                        </a>
                        <ul class="nav">
                            <li class="scroll-to-section"><a href="admin.html" class="active">PRODUCTS</a></li>
                            <li class="scroll-to-section"><a href="adminproducts.html">PRODUCT DESCRIPTION</a></li>
                            <li class="scroll-to-section"><a onclick="logout()" style="color: #333;">LOGOUT</a></li>
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ***** Header Area End ***** -->

    <div class="page-heading" id="top">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="inner-content">
                        <!-- <h2>Check Our Products</h2> -->
                        <!-- <span>Explore Our Exclusive Products – Find Your Perfect Match Today!</span> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <section class="contact-us section">
        <div class="container">
            <div class="inner">
                <div class="row"> 
                    <div class="col-lg-6">
                        <div class="contact-us-left">
                            <!-- Image Section -->
                            <div style="object-fit: contain;justify-content: center;text-align:center;align-items: center;">
                                <img src="image/loginimage.jpg" alt="Main Product Image"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="contact-us-form">
                            <h2>Main Product</h2>
                            <p>Provide a product name and image to list or update the product.</p>
                            <!-- Form -->
                            <div class="form-group">
                                <label for="p_name">Product Name</label>
                                <input type="text" id="p_name" placeholder="Enter product name" />
                            </div>
                            <div class="form-group">
                                <label for="p_image">Product Image</label>
                                <input type="file" id="p_image" accept="image/*" />
                            </div>
                            <div class="form-group">
                                <label for="price">Product Price</label>
                                <input type="text" id="price" placeholder="Enter product price" />
                            </div>
                            <div class="form-group">
                                <label for="rating">Product Rating</label>
                                <input type="number" id="rating" placeholder="Enter product rating" />
                            </div>
                            <button class="login-button" id="submit-button" onclick="submitProduct()">Submit</button>
                            <div class="error-message" id="error-message"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="contact-us section">
        <div class="container">
            <div class="inner">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="contact-us-form">
                            <h3 style="text-align: center;">Added Products</h3><br />
                            <table id="products-table" class="responsive-table" style="align-items: center;justify-content: center;text-align: center;">
                                <thead>
                                    <tr>
                                        <th>Product Name</th>
                                        <th>Product Image</th>
                                        <th>Product Price</th>
                                        <th>Product Rating</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <script>
        const apiUrl = "http://localhost:8888/dawnapi";
        let currentEditId = null;
    
        // Fetch existing products from the API
        async function fetchProducts() {
            try {
                const response = await fetch(`${apiUrl}/getmainproducts`);
                if (!response.ok) throw new Error('Failed to fetch products.');
                const data = await response.json();
                const tableBody = document.querySelector("#products-table tbody");
                tableBody.innerHTML = ""; // Clear table
                data.forEach((product) => {
                    const row = `
                        <tr>
                            <td>${product.p_name}</td>
                            <td>
                                <img src="${product.file_link}" alt="Product Image" width="200" height="200" />
                            </td>
                            <td>${product.price}</td>
                            <td>${product.rating}</td>
                            <td>
                                <button class="btn" onclick="editProduct(${product.id}, '${product.p_name}', '${product.file_link}', '${product.price}', '${product.rating}')">Edit</button>
                                <button class="btn" onclick="deleteProduct(${product.id})">Delete</button>
                            </td>
                        </tr>
                    `;
                    tableBody.innerHTML += row;
                });
            } catch (error) {
                console.error('Error fetching products:', error);
            }
        }
    
        // Submit a new product or update an existing product
        async function submitProduct() {
            const p_name = document.getElementById("p_name").value.trim();
            const p_image = document.getElementById("p_image").files[0];
            const price = document.getElementById("price").value.trim();
            const rating = document.getElementById("rating").value.trim();
    
            if (!p_name || !price || !rating) {
                alert("Please fill in all the required fields.");
                return;
            }
    
            const formData = new FormData();
            formData.append("p_name", p_name);
            if (p_image) formData.append("file", p_image);
            formData.append("price", price);
            formData.append("rating", rating);
    
            try {
                const url = currentEditId ? `${apiUrl}/updatemainproduct/${currentEditId}` : `${apiUrl}/addmainproduct`;
                const method = "POST";
    
                const response = await fetch(url, {
                    method: method,
                    body: formData
                });
    
                if (response.ok) {
                    alert(currentEditId ? "Product updated successfully!" : "Product added successfully!");
                } else {
                    const errorMessage = await response.text();
                    throw new Error(`Failed to process the request. Server message: ${errorMessage}`);
                }
            } catch (error) {
                console.error('Error submitting product:', error);
                alert('Failed to process the request.');
            }
    
            resetForm();
            fetchProducts();
        }
    
        // Reset the form to its default state
        function resetForm() {
            document.getElementById("p_name").value = "";
            document.getElementById("p_image").value = "";
            document.getElementById("price").value = "";
            document.getElementById("rating").value = "";
    
            currentEditId = null;
            document.getElementById("submit-button").textContent = "Submit";
        }
    
        // Edit an existing product
        function editProduct(id, name, image, price, rating) {
            currentEditId = id;
            document.getElementById("p_name").value = name;
            document.getElementById("p_image").value = ""; // Reset file input
            document.getElementById("price").value = price;
            document.getElementById("rating").value = rating;
            document.getElementById("submit-button").textContent = "Update";
        }
    
        // Delete an existing product
        async function deleteProduct(id) {
            try {
                const response = await fetch(`${apiUrl}/deletemainproduct/${id}`, {
                    method: "GET"
                });
    
                if (response.ok) {
                    alert("Product deleted successfully!");
                    fetchProducts();
                } else {
                    throw new Error('Failed to delete product.');
                }
            } catch (error) {
                console.error('Error deleting product:', error);
                alert('Failed to delete product.');
            }
        }
    
        // Fetch products on page load
        window.onload = fetchProducts;
    </script>    

    <!-- ***** Footer Start ***** -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="first-item">
                        <div class="logo" style="color: white;">
                            <h4>Dawon Athletics</h4>
                        </div>
                        <ul>
                            <li><a href="#">SF. NO. 4/1, NANDHAVANAM PHASE-4,
                                PERUMAL KOVIL BACK SIDE, GOKULNAGAR,
                                HOSUR, KRISHNAGIRI - 635109
                                TAMILNADU INDIA</a></li>
                            <li style="color: #fff;">Mail Us: <a href="#">dawonatheletics@gmail.com</a></li>
                            <li style="color: #fff;">Call Us: <a href="#">+91 8056356548</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3">
                    <h4>Useful Links</h4>
                    <ul>
                        <li><a href="index.html">Homepage</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="guide.html">Guide</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h4>Products</h4>
                    <ul>
                        <li><a href="products.html">A Star Weighted Jump Ropes</a></li>
                        <li><a href="products.html">Speed Jump Ropes</a></li>
                        <li><a href="products.html">Beast Ropes</a></li>
                    </ul>
                </div>
                <div class="col-lg-12">
                    <div class="under-footer">
                        <p>Copyright © 2025  Dawn Atheletics, All Rights Reserved. 
                        <ul>
                            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>    

    <!-- jQuery -->
    <script src="assets/js/jquery-2.1.0.min.js"></script>

    <!-- Bootstrap -->
    <script src="assets/js/popper.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- Plugins -->
    <script src="assets/js/owl-carousel.js"></script>
    <script src="assets/js/accordions.js"></script>
    <script src="assets/js/datepicker.js"></script>
    <script src="assets/js/scrollreveal.min.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/imgfix.min.js"></script> 
    <script src="assets/js/slick.js"></script> 
    <script src="assets/js/lightbox.js"></script> 
    <script src="assets/js/isotope.js"></script> 
    
    <!-- Global Init -->
    <script src="assets/js/custom.js"></script>

    <script>

        $(function() {
            var selectedClass = "";
            $("p").click(function(){
            selectedClass = $(this).attr("data-rel");
            $("#portfolio").fadeTo(50, 0.1);
                $("#portfolio div").not("."+selectedClass).fadeOut();
            setTimeout(function() {
              $("."+selectedClass).fadeIn();
              $("#portfolio").fadeTo(50, 1);
            }, 500);
                
            });
        });

    </script>

  </body>
</html>